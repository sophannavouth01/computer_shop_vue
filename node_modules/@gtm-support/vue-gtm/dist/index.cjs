"use strict";var d=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var A=(i,t)=>{for(var r in t)d(i,r,{get:t[r],enumerable:!0})},N=(i,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of O(t))!P.call(i,u)&&u!==r&&d(i,u,{get:()=>t[u],enumerable:!(n=v(t,u))||n.enumerable});return i};var V=i=>N(d({},"__esModule",{value:!0}),i);var I={};A(I,{GtmPlugin:()=>s.GtmSupport,GtmSupport:()=>o.GtmSupport,assertIsGtmId:()=>o.assertIsGtmId,createGtm:()=>R,default:()=>T,hasScript:()=>o.hasScript,loadScript:()=>o.loadScript,useGtm:()=>b});module.exports=V(I);var s=require("@gtm-support/core"),y=require("vue"),o=require("@gtm-support/core"),a;function G(i,t={id:""}){t={trackOnNextTick:!1,...t},a=new s.GtmSupport(t),i.config.globalProperties.$gtm=a,a.isInBrowserContext()&&(t.vueRouter&&E(i,t.vueRouter,t.ignoredViews,t.trackOnNextTick,t.vueRouterAdditionalEventData),a.options.enabled&&a.options.loadScript&&(Array.isArray(t.id)?t.id.forEach(r=>{if(typeof r=="string")(0,s.loadScript)(r,t);else{let n={...t};r.queryParams!=null&&(n.queryParams={...n.queryParams,...r.queryParams}),(0,s.loadScript)(r.id,n)}}):(0,s.loadScript)(t.id,t))),i.provide("gtm",t)}function E(i,t,r=[],n,u=()=>({})){function c(e,l){return e instanceof Error?!!(e.type&l):!1}t.afterEach(async(e,l,f)=>{if(typeof e.name!="string"||Array.isArray(r)&&r.includes(e.name)||typeof r=="function"&&r(e,l))return;let p=e.meta&&typeof e.meta.gtm=="string"&&e.meta.gtm?e.meta.gtm:e.name;c(f,4)?a?.debugEnabled()&&console.log(`[VueGtm]: '${p}' not tracked due to navigation aborted`):c(f,8)&&a?.debugEnabled()&&console.log(`[VueGtm]: '${p}' not tracked due to navigation cancelled`);let g={...await u(e,l),...e.meta?.gtmAdditionalEventData},m=t.options?.history?.base??"";m.endsWith("/")||(m+="/"),m+=e.fullPath.startsWith("/")?e.fullPath.substring(1):e.fullPath,n?(0,y.nextTick)(()=>{a?.trackView(p,m,g)}):a?.trackView(p,m,g)})}function R(i){return{install:t=>G(t,i)}}var x={install:G};var T=x;function b(){return a}0&&(module.exports={GtmPlugin,GtmSupport,assertIsGtmId,createGtm,hasScript,loadScript,useGtm});
//# sourceMappingURL=index.cjs.map