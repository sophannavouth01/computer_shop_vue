var l=/^GTM-[0-9A-Z]+$/;function s(n){if(typeof n!="string"||!l.test(n)){let t=String(n).toUpperCase().replace(/.*-|[^0-9A-Z]/g,""),r=t.length===0?"":` Did you mean 'GTM-${t}'?`;throw new Error(`'${n}' is not a valid GTM-ID (${l}).${r}`)}}function p(n,t){let r=document,e=r.createElement("script"),o=d=>{t.onReady?.({id:n,script:e}),e.removeEventListener("load",o)};if(e.addEventListener("load",o),window.dataLayer=window.dataLayer??[],window.dataLayer?.push({event:"gtm.js","gtm.start":new Date().getTime()}),!n)return e;e.async=!t.defer,e.defer=!!(t.defer||t.compatibility),t.nonce&&(e.nonce=t.nonce),t.scriptType&&(e.type=t.scriptType);let i=new URLSearchParams({id:n,...t.queryParams??{}}),c=t.source??"https://www.googletagmanager.com/gtm.js";e.src=`${c}?${i}`;let a=t.parentElement??r.body;if(typeof a?.appendChild!="function")throw new Error("parentElement must be a DOM element");return a.appendChild(e),e}function m(n="https://www.googletagmanager.com/gtm.js"){return Array.from(document.getElementsByTagName("script")).some(t=>t.src.includes(n))}var y=class{id;options;scriptElements=[];constructor(t){if(Array.isArray(t.id))for(let r of t.id)typeof r=="string"?s(r):s(r.id);else s(t.id);this.id=t.id,this.options={enabled:!0,debug:!1,loadScript:!0,defer:!1,compatibility:!1,...t},delete this.options.id}isInBrowserContext=()=>typeof window<"u";enabled(){return this.options.enabled??!0}enable(t=!0,r){if(this.options.enabled=t,this.isInBrowserContext()&&t&&!m(r)&&this.options.loadScript)if(Array.isArray(this.id))this.id.forEach(e=>{let o;typeof e=="string"?o=p(e,{...this.options}):o=p(e.id,{...this.options,queryParams:e.queryParams}),this.scriptElements.push(o)});else{let e=p(this.id,{...this.options});this.scriptElements.push(e)}}debugEnabled(){return this.options.debug??!1}debug(t){this.options.debug=t}dataLayer(){return this.isInBrowserContext()&&this.options.enabled?window.dataLayer=window.dataLayer??[]:!1}trackView(t,r,e={}){let o=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${o?"":"(disabled)"}]: Dispatching TrackView`,{screenName:t,path:r}),o&&(window.dataLayer=window.dataLayer??[]).push({...e,event:this.options.trackViewEventProperty??"content-view","content-name":r,"content-view-name":t})}trackEvent({event:t,category:r=null,action:e=null,label:o=null,value:i=null,noninteraction:c=!1,...a}={}){let d=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${d?"":"(disabled)"}]: Dispatching event`,{event:t,category:r,action:e,label:o,value:i,...a}),d&&(window.dataLayer=window.dataLayer??[]).push({event:t??"interaction",target:r,action:e,"target-properties":o,value:i,"interaction-type":c,...a})}push(t){let r=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${r?"":"(disabled)"}]: Dispatching event`,t),r&&(window.dataLayer=window.dataLayer??[]).push(t)}};export{l as GTM_ID_PATTERN,y as GtmSupport,s as assertIsGtmId,m as hasScript,p as loadScript};
//# sourceMappingURL=index.js.map