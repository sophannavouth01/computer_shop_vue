{"version":3,"file":"VaMenu.vue_vue_type_script_lang.js","sources":["../../../../../src/components/va-menu/VaMenu.vue"],"sourcesContent":["<template>\n  <VaDropdown v-bind=\"dropdownProps\" ref=\"dropdown\">\n    <template #anchor>\n      <slot name=\"anchor\" />\n    </template>\n\n    <VaDropdownContent @keydown=\"onKeydown\">\n      <VaMenuList @keydown.enter.space.prevent.stop v-bind=\"menuListProps\" ref=\"menuList\" @selected=\"$emit('selected', $event); close()\">\n        <template v-if=\"$slots.default\" #default>\n          <slot />\n        </template>\n      </VaMenuList>\n    </VaDropdownContent>\n  </VaDropdown>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, nextTick, ref } from 'vue'\nimport { VaDropdown, VaDropdownContent } from '../va-dropdown'\nimport { VaMenuList } from '../va-menu-list'\nimport { extractComponentProps, extractComponentEmits, filterComponentProps } from '../../utils/component-options'\nimport { useImmediateFocus, useComponentPresetProp } from '../../composables'\nimport { focusFirstFocusableChild } from '../../utils/focus'\nimport { unwrapEl } from '../../utils/unwrapEl'\n\nconst VaMenuListProps = extractComponentProps(VaMenuList)\nconst VaMenuListEmits = extractComponentEmits(VaMenuList)\nconst VaDropdownProps = extractComponentProps(VaDropdown)\nconst VaDropdownEmits = extractComponentEmits(VaDropdown)\n\nexport default defineComponent({\n  name: 'VaMenu',\n\n  components: { VaDropdown, VaDropdownContent, VaMenuList },\n\n  props: {\n    ...useComponentPresetProp,\n    ...VaMenuListProps,\n    ...VaDropdownProps,\n    stickToEdges: { type: Boolean, default: true },\n  },\n\n  emits: [\n    ...VaDropdownEmits,\n    ...VaMenuListEmits,\n  ],\n\n  setup () {\n    const menuList = ref<HTMLElement>()\n    const dropdown = ref<typeof VaDropdown>()\n\n    useImmediateFocus(menuList)\n\n    const close = () => {\n      dropdown.value?.hide()\n      nextTick(() => {\n        const el = unwrapEl(dropdown.value?.anchorRef)\n        if (el) { focusFirstFocusableChild(el) }\n      })\n    }\n\n    const onKeydown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        close()\n      }\n\n      if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {\n        event.preventDefault()\n      }\n    }\n\n    return {\n      onKeydown,\n      dropdown,\n      menuList,\n      menuListProps: filterComponentProps(VaMenuListProps),\n      dropdownProps: filterComponentProps(VaDropdownProps),\n      close,\n    }\n  },\n})\n</script>\n"],"names":["_a"],"mappings":";;;;;;;;;;AAyBA,MAAM,kBAAkB,sBAAsB,UAAU;AACxD,MAAM,kBAAkB,sBAAsB,UAAU;AACxD,MAAM,kBAAkB,sBAAsB,UAAU;AACxD,MAAM,kBAAkB,sBAAsB,UAAU;AAExD,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EAEN,YAAY,EAAE,YAAY,mBAAmB,WAAW;AAAA,EAExD,OAAO;AAAA,IACL,GAAG;AAAA,IACH,GAAG;AAAA,IACH,GAAG;AAAA,IACH,cAAc,EAAE,MAAM,SAAS,SAAS,KAAK;AAAA,EAC/C;AAAA,EAEA,OAAO;AAAA,IACL,GAAG;AAAA,IACH,GAAG;AAAA,EACL;AAAA,EAEA,QAAS;AACP,UAAM,WAAW;AACjB,UAAM,WAAW;AAEjB,sBAAkB,QAAQ;AAE1B,UAAM,QAAQ,MAAM;;AAClB,qBAAS,UAAT,mBAAgB;AAChB,eAAS,MAAM;;AACb,cAAM,KAAK,UAASA,MAAA,SAAS,UAAT,gBAAAA,IAAgB,SAAS;AAC7C,YAAI,IAAI;AAAE,mCAAyB,EAAE;AAAA,QAAE;AAAA,MAAA,CACxC;AAAA,IAAA;AAGG,UAAA,YAAY,CAAC,UAAyB;AACtC,UAAA,MAAM,QAAQ,UAAU;AACpB;MACR;AAEA,UAAI,MAAM,QAAQ,eAAe,MAAM,QAAQ,WAAW;AACxD,cAAM,eAAe;AAAA,MACvB;AAAA,IAAA;AAGK,WAAA;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA,eAAe,qBAAqB,eAAe;AAAA,MACnD,eAAe,qBAAqB,eAAe;AAAA,MACnD;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;"}