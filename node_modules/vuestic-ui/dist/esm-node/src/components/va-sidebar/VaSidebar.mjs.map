{"version":3,"file":"VaSidebar.mjs","sources":["../../../../../src/components/va-sidebar/VaSidebar.vue"],"sourcesContent":["<template>\n  <aside\n    ref=\"rootElement\"\n    class=\"va-sidebar\"\n    :class=\"computedClass\"\n    :style=\"computedStyle\"\n    @mouseenter=\"updateHoverState(true)\"\n    @mouseleave=\"updateHoverState(false)\"\n  >\n    <div v-show=\"doShowMenu\" class=\"va-sidebar__menu\" ref=\"menu\" :style=\"{\n      width: menuWidth,\n      minWidth: menuWidth,\n    }\">\n      <va-config :components=\"{ VaSidebarItem: vaSidebarItemProps }\">\n        <slot />\n      </va-config>\n    </div>\n  </aside>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, ref, shallowRef, watchEffect } from 'vue'\n\nimport { VaConfig } from '../va-config'\nimport { getGradientBackground } from '../../services/color'\nimport { useColors, useTextColor, useBem, useClickOutside, useElementWidth } from '../../composables'\nimport { useSidebar } from './hooks/useSidebar'\nimport { useComponentPresetProp } from '../../composables/useComponentPreset'\n\nexport default defineComponent({\n  name: 'VaSidebar',\n  props: {\n    ...useComponentPresetProp,\n    activeColor: { type: String, default: 'primary' },\n    hoverColor: { type: String, default: undefined },\n    hoverOpacity: {\n      type: Number,\n      default: 0.2,\n      validator: (v: number) => v >= 0 && v <= 1,\n    },\n    borderColor: { type: String, default: undefined },\n    color: { type: String, default: 'background-element' },\n    textColor: { type: String },\n    gradient: { type: Boolean, default: false },\n    minimized: { type: Boolean, default: false },\n    hoverable: { type: Boolean, default: false },\n    width: { type: String, default: '16rem' },\n    minimizedWidth: { type: String, default: '4rem' },\n    modelValue: { type: Boolean, default: true },\n    animated: { type: [Boolean, String], default: true },\n    closeOnClickOutside: { type: Boolean, default: false },\n  },\n\n  emits: ['update:modelValue'],\n\n  components: { VaConfig },\n\n  setup (props, { emit }) {\n    const { getColor } = useColors()\n    useSidebar(props)\n\n    const isHovered = ref(false)\n\n    const isMinimized = computed(() => props.minimized || (props.hoverable && !isHovered.value))\n\n    const menu = ref<HTMLElement>()\n    const currentMenuWidth = useElementWidth(menu)\n    // Display: none for menu if it closed\n    // Otherwise sidebar items will be focusable when sidebar is hidden\n    const doShowMenu = computed(() => {\n      // Always show menu if sidebar is visible\n      if (props.modelValue === true) {\n        return true\n      }\n\n      // If menu is not rendered yet, ignore and show it\n      if (currentMenuWidth.value === null) {\n        return true\n      }\n\n      return currentMenuWidth.value > 0\n    })\n\n    const sidebarWidth = ref()\n\n    const getSidebarWidth = () => {\n      if (!props.modelValue) {\n        return 0\n      }\n\n      return isMinimized.value ? props.minimizedWidth : props.width\n    }\n\n    const menuWidth = computed(() => isMinimized.value ? props.minimizedWidth : props.width)\n\n    watchEffect(() => {\n      const width = getSidebarWidth()\n      // Set width after doShowMenu is applied, so transition is executed after menu is displayed\n      setTimeout(() => {\n        sidebarWidth.value = width\n      })\n    })\n\n    const backgroundColorComputed = computed(() => getColor(props.color))\n    const { textColorComputed } = useTextColor(backgroundColorComputed)\n\n    const computedStyle = computed(() => {\n      const backgroundColor = getColor(backgroundColorComputed.value)\n\n      const color = textColorComputed.value\n\n      return {\n        color,\n        backgroundColor,\n        backgroundImage: props.gradient ? getGradientBackground(backgroundColor) : undefined,\n        overflowX: currentMenuWidth.value === sidebarWidth.value ? undefined : 'hidden' as const,\n        width: sidebarWidth.value,\n        minWidth: sidebarWidth.value,\n      }\n    })\n\n    const computedClass = useBem('va-sidebar', () => ({\n      minimized: isMinimized.value,\n      animated: Boolean(props.animated),\n      'animated-right': props.animated === 'right',\n      'animated-left': props.animated === 'left' || props.animated === true,\n    }))\n\n    const updateHoverState = (newHoverState: boolean) => {\n      isHovered.value = props.hoverable && newHoverState\n    }\n\n    const rootElement = shallowRef<HTMLElement>()\n\n    useClickOutside([rootElement], () => {\n      if (props.closeOnClickOutside && props.modelValue) {\n        setTimeout(() => {\n          emit('update:modelValue', false)\n        }, 0)\n      }\n    })\n\n    return {\n      menu,\n      menuWidth,\n      doShowMenu,\n      computedClass,\n      computedStyle,\n      updateHoverState,\n      rootElement,\n      vaSidebarItemProps: computed(() => ({\n        textColor: props.textColor,\n        activeColor: props.activeColor,\n        hoverColor: props.hoverColor,\n        borderColor: props.borderColor,\n        hoverOpacity: props.hoverOpacity,\n      })),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-sidebar {\n  min-height: var(--va-sidebar-min-height);\n  height: var(--va-sidebar-height);\n  z-index: var(--va-sidebar-z-index);\n  font-family: var(--va-font-family);\n  display: inline-flex;\n  box-sizing: border-box;\n  position: relative;\n  top: 0;\n\n  &__menu {\n    display: flex;\n    flex-direction: column;\n    min-width: 100%;\n    flex: 1;\n    height: 100%;\n    right: 0;\n    max-height: var(--va-sidebar-menu-max-height);\n    overflow-y: var(--va-sidebar-menu-overflow-y);\n    overflow-x: var(--va-sidebar-menu-overflow-x);\n    margin-left: auto;\n\n    @include va-scroll(var(--va-secondary));\n  }\n\n  &--animated {\n    transition: var(--va-sidebar-transition);\n\n    .va-sidebar__menu {\n      transition: var(--va-sidebar-transition);\n    }\n  }\n\n  &--animated-right {\n    justify-content: flex-end;\n  }\n\n  &--animated-left {\n    justify-content: flex-start;\n  }\n\n  &--minimized {\n    left: 0;\n\n    .va-sidebar__title {\n      display: none;\n    }\n  }\n}\n</style>\n"],"names":["_resolveComponent","_openBlock","_createElementBlock","_normalizeStyle","_withDirectives","_createElementVNode"],"mappings":";;;;;+BACEA,iBAgBQ,WAAA;SAdDC,UACG,GAAAC,mBAAA,SAAA;AAAA,IACP,KAAK;AAAA,IACL,sBAAU,CAAE,cAAA,KAAA,aAAA,CAAA;AAAA,IACZ,OAAUC,eAAA,KAAA,aAAA;AAAA,IAAA,cAAA,OAAA,CAAA,MAAA,OAAA,CAAA,IAAA,CAAA,WAAA,KAAA,iBAAA,IAAA;AAAA,yBAEX,CAOM,MAAA,OAAA,CAAA,IAAA,CAAA,WAAA,KAAA,iBAAA,KAAA;AAAA,EAAA,GAAA;AAAA,IAPsDC,eAAAC,mBAAA,OAAA;AAAA,MAAE,OAAK;AAAA,MAAA,KAAA;AAAA,MAA4C,OAAAF,eAAA;AAAA,QAAA,OAAA,KAAA;AAAA;;;;QAKnG,YAAA,EAAA,eAAA,KAAA,mBAAA;AAAA,MAAA,GAAA;AAAA;;;;MALC,GAAA,GAAA,CAAA,YAAA,CAAA;AAAA,IAAA,GAAA,CAAA,GAAA;AAAA;;;;;"}