{"version":3,"file":"VaLayout.vue_vue_type_script_lang.mjs","sources":["../../../../../src/components/va-layout/VaLayout.vue"],"sourcesContent":["<template>\n  <div class=\"va-layout\" :style=\"`--va-horizontal-template: ${String(horizontalTemplate)};--va-vertical-template: ${String(verticalTemplate)};--va-template-area: ${String(templateArea)};--va-paddings-top-px: ${String(paddings.top + 'px')};--va-paddings-bottom-px: ${String(paddings.bottom + 'px')};--va-paddings-left-px: ${String(paddings.left + 'px')};--va-paddings-right-px: ${String(paddings.right + 'px')}`\">\n    <VaLayoutArea\n      v-for=\"area in areaNames\"\n      :key=\"area\"\n      :area=\"area\"\n      :config=\"$props[area] || {}\"\n      @overlay-click=\"$emit(`${area}-overlay-click`)\"\n    >\n      <slot :name=\"area\" />\n    </VaLayoutArea>\n\n    <div class=\"va-layout__area va-layout__area--content\">\n      <slot>\n        <slot name=\"content\" />\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, watchEffect } from 'vue'\nimport {\n  useGridTemplateArea,\n  AreaName,\n} from './hooks/useGridTemplateArea'\nimport { useLayoutProps, useLayout } from './hooks/useLayout'\nimport VaLayoutArea from './components/VaLayoutArea.vue'\nimport { useDocument } from '../../composables'\n\nconst areaNames: AreaName[] = [\n  'top',\n  'left',\n  'right',\n  'bottom',\n]\n\nexport default defineComponent({\n  name: 'VaLayout',\n\n  props: {\n    ...useLayoutProps,\n    allowBodyScrollOnOverlay: { type: Boolean, default: false },\n  },\n\n  emits: [\n    'top-overlay-click',\n    'left-overlay-click',\n    'right-overlay-click',\n    'bottom-overlay-click',\n  ],\n\n  components: { VaLayoutArea },\n\n  setup (props, { slots }) {\n    const { paddings } = useLayout(props)\n\n    const doDisableScroll = computed(() => {\n      return !props.allowBodyScrollOnOverlay && areaNames.some((area) => props[area]?.overlay)\n    })\n\n    const document = useDocument()\n\n    watchEffect(() => {\n      const overflowParent = document.value?.body\n\n      if (!overflowParent) { return }\n\n      if (doDisableScroll.value) {\n        overflowParent.style.overflow = 'hidden'\n      } else {\n        overflowParent.style.overflow = ''\n      }\n    })\n\n    return {\n      areaNames,\n      templateArea: useGridTemplateArea(props),\n      verticalTemplate: computed(() => {\n        return [\n          slots.top ? 'min-content' : '0fr',\n          '1fr',\n          slots.bottom ? 'min-content' : '0fr',\n        ]\n          .filter(Boolean)\n          .join(' ')\n      }),\n      horizontalTemplate: computed(() => {\n        return [\n          slots.left ? 'min-content' : '0fr',\n          '1fr',\n          slots.right ? 'min-content' : '0fr',\n        ]\n          .filter(Boolean)\n          .join(' ')\n      }),\n      paddings,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import '../../styles/resources';\n@import \"variables\";\n\n.va-layout {\n  display: grid;\n  grid-template-columns: var(--va-horizontal-template);\n  grid-template-rows: var(--va-vertical-template);\n  grid-template-areas: var(--va-template-area);\n  gap: 0;\n  position: relative;\n  z-index: 0;\n  max-width: 100%;\n  max-height: 100%;\n\n  &__area {\n    @include va-scroll();\n\n    &--content {\n      grid-area: content;\n      z-index: 0;\n      // Make it possible for content to be smaller than the layout\n      min-width: 0;\n      min-height: 0;\n\n      // When scroll anchor is present in content, there might be overflow, so we add scroll margins\n      [id] {\n        scroll-margin-top: calc(var(--va-paddings-top-px) + var(--va-layout-scroll-padding));\n        scroll-margin-bottom: calc(var(--va-paddings-bottom-px) + var(--va-layout-scroll-padding));\n        scroll-margin-left: calc(var(--va-paddings-left-px) + var(--va-layout-scroll-padding));\n        scroll-margin-right: calc(var(--va-paddings-right-px) + var(--va-layout-scroll-padding));\n      }\n    }\n  }\n}\n</style>\n"],"names":[],"mappings":";;;;;AA8BA,MAAM,YAAwB;AAAA,EAC5B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEA,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EAEN,OAAO;AAAA,IACL,GAAG;AAAA,IACH,0BAA0B,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,EAC5D;AAAA,EAEA,OAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAAA,EAEA,YAAY,EAAE,aAAa;AAAA,EAE3B,MAAO,OAAO,EAAE,SAAS;AACvB,UAAM,EAAE,SAAA,IAAa,UAAU,KAAK;AAE9B,UAAA,kBAAkB,SAAS,MAAM;AAC9B,aAAA,CAAC,MAAM,4BAA4B,UAAU,KAAK,CAAC,SAAS;;AAAA,2BAAM,IAAI,MAAV,mBAAa;AAAA,OAAO;AAAA,IAAA,CACxF;AAED,UAAM,WAAW;AAEjB,gBAAY,MAAM;;AACV,YAAA,kBAAiB,cAAS,UAAT,mBAAgB;AAEvC,UAAI,CAAC,gBAAgB;AAAE;AAAA,MAAO;AAE9B,UAAI,gBAAgB,OAAO;AACzB,uBAAe,MAAM,WAAW;AAAA,MAAA,OAC3B;AACL,uBAAe,MAAM,WAAW;AAAA,MAClC;AAAA,IAAA,CACD;AAEM,WAAA;AAAA,MACL;AAAA,MACA,cAAc,oBAAoB,KAAK;AAAA,MACvC,kBAAkB,SAAS,MAAM;AACxB,eAAA;AAAA,UACL,MAAM,MAAM,gBAAgB;AAAA,UAC5B;AAAA,UACA,MAAM,SAAS,gBAAgB;AAAA,QAE9B,EAAA,OAAO,OAAO,EACd,KAAK,GAAG;AAAA,MAAA,CACZ;AAAA,MACD,oBAAoB,SAAS,MAAM;AAC1B,eAAA;AAAA,UACL,MAAM,OAAO,gBAAgB;AAAA,UAC7B;AAAA,UACA,MAAM,QAAQ,gBAAgB;AAAA,QAE7B,EAAA,OAAO,OAAO,EACd,KAAK,GAAG;AAAA,MAAA,CACZ;AAAA,MACD;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;"}