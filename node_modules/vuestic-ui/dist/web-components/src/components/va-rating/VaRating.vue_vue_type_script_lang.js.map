{"version":3,"file":"VaRating.vue_vue_type_script_lang.js","sources":["../../../../../src/components/va-rating/VaRating.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-rating\"\n    :class=\"rootClass\"\n    :aria-label=\"tp($props.ariaLabel, { max: $props.max, value: $props.modelValue })\"\n  >\n    <div\n      class=\"va-rating__item-wrapper\"\n      @keyup.left=\"onArrowKeyPress(-1)\"\n      @keyup.right=\"onArrowKeyPress(1)\"\n      @mouseenter=\"onMouseEnter\"\n      @mouseleave=\"onMouseLeave\"\n    >\n      <va-rating-item\n        v-for=\"itemNumber in $props.max\"\n        :key=\"itemNumber\"\n        class=\"va-rating__item\"\n        v-bind=\"VaRatingItemProps\"\n        :aria-label=\"tp($props.ariaItemLabel, { max: $props.max, value: itemNumber })\"\n        :model-value=\"getItemValue(itemNumber - 1)\"\n        :tabindex=\"tabIndexComputed\"\n        :disabled=\"$props.disabled\"\n        :readonly=\"$props.readonly\"\n        @hover=\"isInteractionsEnabled && onItemHoveredValueUpdate(itemNumber - 1, $event)\"\n        @update:model-value=\"isInteractionsEnabled && onItemValueUpdate(itemNumber - 1, $event)\"\n        v-slot=\"{ value, onClick }\"\n      >\n        <slot name=\"item\" v-bind=\"{ value: value, onClick: onClick, index: itemNumber }\">\n          <template v-if=\"$props.numbers\">\n            <VaRatingItemNumberButton\n              v-bind=\"VaRatingItemNumberButtonProps\"\n              :model-value=\"value\"\n              :item-number=\"itemNumber\"\n            />\n          </template>\n        </slot>\n      </va-rating-item>\n    </div>\n    <span\n      v-if=\"$props.texts && $props.texts.length === $props.max\"\n      class=\"va-rating__text-wrapper\"\n      :style=\"{ color: computedColor }\"\n    >\n      {{ $props.texts[Math.round(visibleValue) - 1] }}\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, PropType } from 'vue'\n\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\nimport { useFormField, useFormFieldProps, useTranslation } from '../../composables'\nimport { useRating, useRatingProps } from './hooks/useRating'\nimport { useVaRatingColors, useVaRatingColorsProps } from './hooks/useVaRatingColors'\n\nimport { RatingValue } from './types'\nimport { useComponentPresetProp } from '../../composables/useComponentPreset'\n\nimport VaRatingItem from './components/VaRatingItem/VaRatingItem.vue'\nimport VaRatingItemNumberButton from './components/VaRatingItemNumberButton.vue'\n\nconst VaRatingItemPropsDeclarations = extractComponentProps(VaRatingItem, ['modelValue', 'itemNumber'])\nconst VaRatingItemNumberButtonPropsDeclarations = extractComponentProps(VaRatingItemNumberButton, ['modelValue', 'itemNumber'])\n\nexport default defineComponent({\n  name: 'VaRating',\n  props: {\n    ...VaRatingItemNumberButtonPropsDeclarations,\n    ...useRatingProps,\n    ...useVaRatingColorsProps,\n    ...useFormFieldProps,\n    ...VaRatingItemPropsDeclarations,\n    ...useComponentPresetProp,\n    modelValue: { type: Number, default: 0 },\n    numbers: { type: Boolean, default: false },\n    halves: { type: Boolean, default: false },\n    max: { type: Number, default: 5 },\n    texts: { type: Array as PropType<string[]>, default: () => [] },\n\n    ariaLabel: { type: String, default: '$t:currentRating' },\n    ariaItemLabel: { type: String, default: '$t:voteRating' },\n  },\n  emits: ['update:modelValue'],\n  components: { VaRatingItem, VaRatingItemNumberButton },\n  setup (props) {\n    const { computedClasses: rootClass } = useFormField('va-rating', props)\n    const {\n      visibleValue,\n      modelValue: vModel,\n      hoveredValue,\n      isHovered,\n      onMouseEnter,\n      onMouseLeave,\n      onItemValueUpdate,\n      onItemHoveredValueUpdate,\n      getItemValue,\n    } = useRating(props)\n    const isInteractionsEnabled = computed(() => !props.disabled && !props.readonly)\n\n    const onArrowKeyPress = (direction: 1 | -1) => {\n      const step = props.halves ? RatingValue.HALF : RatingValue.FULL\n      const nextStep = visibleValue.value + step * direction\n      const min = props.clearable ? 0 : step\n      if (nextStep >= min && nextStep <= props.max) {\n        onItemValueUpdate(visibleValue.value, step * direction)\n      } else if (nextStep < min) {\n        onItemValueUpdate(min, 0)\n      } else {\n        onItemValueUpdate(props.max, direction === -1 ? step * direction : 0)\n      }\n    }\n\n    const { tp, t } = useTranslation()\n\n    const {\n      computedColor,\n      backgroundComputed,\n      textColorComputed,\n    } = useVaRatingColors(props)\n\n    const tabIndexComputed = computed(() => isInteractionsEnabled.value ? 0 : undefined)\n\n    const VaRatingItemProps = filterComponentProps(VaRatingItemPropsDeclarations)\n    const VaRatingItemNumberButtonProps = filterComponentProps(VaRatingItemNumberButtonPropsDeclarations)\n\n    return {\n      tp,\n      t,\n      visibleValue,\n      vModel,\n      hoveredValue,\n      isHovered,\n      onMouseEnter,\n      onMouseLeave,\n      onItemValueUpdate,\n      onItemHoveredValueUpdate,\n      getItemValue,\n      onArrowKeyPress,\n      computedColor,\n      backgroundComputed,\n      textColorComputed,\n      rootClass,\n      VaRatingItemProps,\n      VaRatingItemNumberButtonProps,\n      isInteractionsEnabled,\n      tabIndexComputed,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import 'variables';\n\n.va-rating {\n  display: var(--va-rating-display);\n  font-family: var(--va-font-family);\n\n  &__number-item {\n    @include normalize-button();\n\n    font-size: var(--va-rating-number-item-font-size);\n    margin: var(--va-rating-number-item-margin);\n    font-weight: var(--va-rating-number-item-font-weight);\n\n    @include flex-center();\n\n    cursor: pointer;\n\n    @at-root {\n      .va-rating--disabled & {\n        @include va-disabled();\n      }\n\n      .va-rating--readonly & {\n        cursor: default;\n      }\n    }\n  }\n\n  &__item-wrapper {\n    display: flex;\n    cursor: var(--va-rating-item-wrapper-cursor);\n\n    @at-root {\n      .va-rating--readonly &,\n      .va-rating--disabled & {\n        cursor: default;\n      }\n    }\n  }\n\n  &-item {\n    display: flex;\n\n    @include flex-center();\n\n    .va-rating--disabled & {\n      @include va-disabled();\n\n      &__wrapper {\n        cursor: initial !important;\n      }\n    }\n\n    .va-rating--readonly & &__wrapper {\n      cursor: initial !important;\n    }\n  }\n\n  &__text-wrapper {\n    padding-left: 10px;\n  }\n}\n</style>\n"],"names":["VaRatingItem"],"mappings":";;;;;;;;;;;AA8DA,MAAM,gCAAgC,sBAAsBA,eAAc,CAAC,cAAc,YAAY,CAAC;AACtG,MAAM,4CAA4C,sBAAsB,0BAA0B,CAAC,cAAc,YAAY,CAAC;AAE9H,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,OAAO;AAAA,IACL,GAAG;AAAA,IACH,GAAG;AAAA,IACH,GAAG;AAAA,IACH,GAAG;AAAA,IACH,GAAG;AAAA,IACH,GAAG;AAAA,IACH,YAAY,EAAE,MAAM,QAAQ,SAAS,EAAE;AAAA,IACvC,SAAS,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IACzC,QAAQ,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IACxC,KAAK,EAAE,MAAM,QAAQ,SAAS,EAAE;AAAA,IAChC,OAAO,EAAE,MAAM,OAA6B,SAAS,MAAM,CAAA,EAAG;AAAA,IAE9D,WAAW,EAAE,MAAM,QAAQ,SAAS,mBAAmB;AAAA,IACvD,eAAe,EAAE,MAAM,QAAQ,SAAS,gBAAgB;AAAA,EAC1D;AAAA,EACA,OAAO,CAAC,mBAAmB;AAAA,EAC3B,YAAY,EAAA,cAAEA,eAAc,yBAAyB;AAAA,EACrD,MAAO,OAAO;AACZ,UAAM,EAAE,iBAAiB,UAAA,IAAc,aAAa,aAAa,KAAK;AAChE,UAAA;AAAA,MACJ;AAAA,MACA,YAAY;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,IACE,UAAU,KAAK;AACb,UAAA,wBAAwB,SAAS,MAAM,CAAC,MAAM,YAAY,CAAC,MAAM,QAAQ;AAEzE,UAAA,kBAAkB,CAAC,cAAsB;AAC7C,YAAM,OAAO,MAAM,SAAS,YAAY,OAAO,YAAY;AACrD,YAAA,WAAW,aAAa,QAAQ,OAAO;AACvC,YAAA,MAAM,MAAM,YAAY,IAAI;AAClC,UAAI,YAAY,OAAO,YAAY,MAAM,KAAK;AAC1B,0BAAA,aAAa,OAAO,OAAO,SAAS;AAAA,MAAA,WAC7C,WAAW,KAAK;AACzB,0BAAkB,KAAK,CAAC;AAAA,MAAA,OACnB;AACL,0BAAkB,MAAM,KAAK,cAAc,KAAK,OAAO,YAAY,CAAC;AAAA,MACtE;AAAA,IAAA;AAGF,UAAM,EAAE,IAAI,EAAE,IAAI,eAAe;AAE3B,UAAA;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,IAAA,IACE,kBAAkB,KAAK;AAE3B,UAAM,mBAAmB,SAAS,MAAM,sBAAsB,QAAQ,IAAI,MAAS;AAE7E,UAAA,oBAAoB,qBAAqB,6BAA6B;AACtE,UAAA,gCAAgC,qBAAqB,yCAAyC;AAE7F,WAAA;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;"}